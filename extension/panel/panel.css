:host{
  all:initial;
  font: 13px/1.35 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;

  /* Brand palette */
  --p-cyan:#2FE1FF;
  --p-blue:#2D6BFF;
  --p-magenta:#FF3FD2;
  --p-violet:#7A5CFF;

  /* Surfaces */
  --bg:#040507;
  --panel:#0A0D12;
  --raised:#10141C;

  /* Text */
  --txt:#F5F8FF;
  --mut:rgba(245,248,255,.70);

  /* Lines */
  --line:rgba(245,248,255,.10);
  --line2:rgba(245,248,255,.14);

  /* Signals */
  --ok:#00FF9C;
  --err:#FF2056;
  --warn:#FFB020;

  /* Glow */
  --glowC:rgba(47,225,255,.22);
  --glowM:rgba(255,63,210,.20);
  --glowB:rgba(45,107,255,.18);
}
*{box-sizing:border-box}

.wrap, .panel, .header, .body { cursor: default; }

.body{
  border-top: 0 !important;
  box-shadow: none !important;
}

.wrap{
  position:fixed;
  left:0; top:0;
  width: 380px;
  z-index: 2147483647;
  pointer-events:auto;
  color: var(--txt);
}

.panel{
  position: relative;
  overflow: visible; /* tooltip can escape */
  border-radius: 18px;
  box-shadow:
    0 22px 80px rgba(0,0,0,.62),
    0 0 0 1px rgba(255,255,255,.04) inset;
}

/* Inner clip preserves rounded corners + bg */
.panelClip{
  border-radius: 18px;
  overflow: hidden;

  border: 1px solid rgba(245,248,255,.12);
  background:
    radial-gradient(140% 160% at 12% 0%, rgba(47,225,255,.16), transparent 56%),
    radial-gradient(140% 160% at 96% 18%, rgba(255,63,210,.12), transparent 58%),
    radial-gradient(120% 160% at 55% 120%, rgba(45,107,255,.11), transparent 62%),
    radial-gradient(120% 120% at 30% 65%, rgba(122,92,255,.08), transparent 66%),
    rgba(10,13,18,.94);
  backdrop-filter: blur(10px);
}

/* ===== Header → Tab strip layout (NO divider under tabs) ===== */
.header{
  display:flex;
  align-items:flex-end;
  gap:10px;
  padding: 10px 12px 0 12px;
  border-bottom: 0;
  user-select:none;
  cursor: grab;
}

/* Tab strip takes most space */
.tabBar{
  position: relative;
  display:flex;
  align-items:flex-end;
  flex: 1 1 auto;
  min-width:0;

  gap: 0;
  padding-bottom: 0;
}

/* subtle “rail” behind tabs */
.tabBar::before{
  content:"";
  position:absolute;
  left:0; right:0;
  bottom: 0;
  height: 1px;
  background: rgba(245,248,255,.16);
  opacity: .55;
  z-index: 0;
  pointer-events:none;
}

/* Mask that hides any tab shadow bleeding onto the content pane */
.tabBar::after{
  content:"";
  position:absolute;
  left:0; right:0;
  bottom:-1px;
  height: 14px;
  background: rgba(245,248,255,.05);
  z-index: 2;
  pointer-events:none;
}

/* Explorer-like “folder tab” (normalized height) */
.tabBtn{
  appearance:none;
  position: relative;

  height: 34px;
  display:flex;
  align-items:center;

  border: 1px solid rgba(245,248,255,.10);
  border-bottom: 1px solid rgba(245,248,255,.10);
  background: rgba(0,0,0,.28);
  color: rgba(245,248,255,.74);

  border-top-left-radius: 12px;
  border-top-right-radius: 12px;

  padding: 0 12px;
  font-weight: 900;
  font-size: 12px;
  letter-spacing:.2px;
  line-height: 1;
  cursor:pointer;
  user-select:none;
  white-space:nowrap;

  transform: translateY(2px);
  z-index: 1;
  margin-left: -1px;

  transition: filter 120ms ease, transform 120ms ease, background 120ms ease, border-color 120ms ease, box-shadow 140ms ease;
}
.tabBtn:first-child{ margin-left: 0; }

.tabBtn:hover{
  filter: brightness(1.08);
  background: rgba(0,0,0,.20);
}
.tabBtn:active{ transform: translateY(3px); }

/* Active tab: slightly larger + on top + blends into content */
.tabBtn.isActive{
  height: 36px;
  transform: translateY(0px);
  z-index: 3;

  background: rgba(245,248,255,.05);
  color: rgba(245,248,255,.98);
  border-color: rgba(245,248,255,.18);
  border-bottom-color: transparent;

  box-shadow:
    inset 0 1px 0 rgba(245,248,255,.10),
    0 -10px 24px rgba(0,0,0,.42),
    0 0 0 1px rgba(255,255,255,.02) inset;
}

/* “Edit tab with logo” */
.tabBtn.tabEdit{
  gap:8px;
  padding-left: 10px;
}
.logoMini{
  width: 18px;
  height: 18px;
  border-radius: 7px;
  border: 1px solid rgba(245,248,255,.14);
  background:
    linear-gradient(135deg, rgba(47,225,255,.92), rgba(45,107,255,.90) 45%, rgba(255,63,210,.90));
  box-shadow:
    0 0 14px rgba(47,225,255,.16),
    0 0 14px rgba(255,63,210,.12);
  display:grid;
  place-items:center;
  flex: 0 0 auto;
}
.logoMini span{
  font-weight: 950;
  font-size: 10px;
  letter-spacing:.5px;
  opacity:.95;
  color: rgba(4,5,7,.90);
}

/* Right controls */
.right{
  display:flex;
  align-items:center;
  gap:8px;
  flex: 0 0 auto;
  padding-bottom: 6px;
}

/* Clickable cursor */
.btn,
.panel-btn,
.dev-btn,
.tabBtn{ cursor:pointer; }

/* Picking crosshair override */
.panelCursorDefault,
.panelCursorDefault *{ cursor: default !important; }
.panelCursorDefault .btn,
.panelCursorDefault .panel-btn,
.panelCursorDefault .dev-btn,
.panelCursorDefault .tabBtn{ cursor: pointer !important; }

/* Icons */
.icon-btn{
  width: 18px;
  height: 18px;
  display: inline-block;

  /* tint toward cyan/blue */
  filter:
    brightness(0)
    saturate(100%)
    invert(74%)
    sepia(32%)
    saturate(2400%)
    hue-rotate(165deg)
    brightness(100%)
    contrast(102%);
  transition: filter 140ms ease, opacity 140ms ease, transform 140ms ease;
  opacity: .92;
  user-select: none;
}
.icon-btn:hover{
  filter:
    brightness(0)
    saturate(100%)
    invert(100%);
  opacity: 1;
}
.icon-btn:active{ transform: translateY(1px); }
.icon-btn.isInverted{
  filter: brightness(0) saturate(100%) invert(100%) !important;
}

/* Tooltip node (accurate) */
.tooltip{
  position: fixed;
  left: 0;
  top: 0;
  transform: translate(-50%, 0);
  max-width: 320px;

  font-size: 11px;
  line-height: 1.2;
  padding: 8px 10px;

  border-radius: 12px;
  border: 1px solid rgba(245,248,255,.12);
  background: rgba(10,13,18,.96);
  color: rgba(245,248,255,.95);
  box-shadow:
    0 18px 50px rgba(0,0,0,.62),
    0 0 0 1px rgba(255,255,255,.03) inset;

  opacity: 0;
  pointer-events: none;
  transition: opacity 110ms ease;
  z-index: 2147483647;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.tooltip.on{ opacity: 1; }

/* ===== Body / panes (seamless into content) ===== */
.body{
  padding: 12px;
  display:grid;
  gap:10px;

  background: rgba(245,248,255,.05);
  border-top: 0;
  box-shadow: none;
}

.pane{ display:none; }
.pane.isActive{ display:block; }

.paneBox{
  border: 1px solid rgba(245,248,255,.10);
  background: rgba(245,248,255,.035);
  border-radius: 14px;
  padding: 12px;
  color: rgba(245,248,255,.78);
}

/* Edit spacing */
.editPane{
  display:grid;
  gap:12px;
}
.selRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.sel{
  font-size:12px;
  color: rgba(245,248,255,.78);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width: 240px;
  cursor:pointer;
}
.devActions{
  display:flex;
  align-items:center;
  gap:10px;
}

.textarea{
  width:100%;
  min-height: 140px;
  resize: vertical;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(245,248,255,.12);
  background: rgba(0,0,0,.30);
  color: var(--txt);
  outline:none;

  margin-top: 6px;
  margin-bottom: 6px;

  box-shadow:
    0 0 0 1px rgba(255,255,255,.02) inset;
}
.textarea:focus{
  border-color: rgba(47,225,255,.35);
  box-shadow:
    0 0 0 1px rgba(47,225,255,.22) inset,
    0 0 22px rgba(47,225,255,.10);
}

.row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding-top: 2px;
}
.hint{
  font-size:12px;
  color: rgba(245,248,255,.68);
  white-space: pre-line;
}

.btn{
  border: 1px solid rgba(245,248,255,.14);
  border-radius: 14px;
  padding: 10px 12px;
  font-weight: 950;
  letter-spacing:.2px;
  color: #071015;
  background:
    linear-gradient(90deg, rgba(47,225,255,.96), rgba(45,107,255,.92) 45%, rgba(255,63,210,.90));
  transition: transform 120ms ease, filter 120ms ease, opacity 120ms ease, box-shadow 140ms ease;
  user-select:none;
  box-shadow:
    0 14px 36px rgba(0,0,0,.50),
    0 0 22px rgba(47,225,255,.12),
    0 0 20px rgba(255,63,210,.10);
}

.btnStyle:hover{
  filter:brightness(1.10) saturate(1.16);
  box-shadow:
    0 16px 42px rgba(0,0,0,.55),
    0 0 26px rgba(47,225,255,.16),
    0 0 26px rgba(255,63,210,.14);
}
.btn:active{ transform: translateY(1px); }
.btn:disabled{ opacity:.65; cursor:not-allowed; filter:saturate(.82); box-shadow:none; }

.btnGhost{
  background: rgba(0,0,0,.26);
  color: rgba(245,248,255,.95);
  border-color: rgba(245,248,255,.16);
  box-shadow:
    0 12px 30px rgba(0,0,0,.50),
    0 0 0 1px rgba(255,255,255,.02) inset;
}
.btnGhost:hover{
  filter: brightness(1.08);
  box-shadow:
    0 14px 34px rgba(0,0,0,.55),
    0 0 18px rgba(47,225,255,.10);
}

.minimized .body{ display:none; }

/* Picking mode */
.pickingMode{ opacity: .55; }

/* Loading overlay */
.loadingOverlay{
  position:absolute;
  inset:0;
  z-index: 4;
  display:none;
  pointer-events:auto;

  background: rgba(0,0,0,.48);
  backdrop-filter: blur(6px);
}
.loadingOn .loadingOverlay{ display:block; }

.panel-btn{ position: relative; z-index: 6; }

.loadingCard{
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%,-50%);
  width: 86%;
  max-width: 320px;
  padding: 14px 14px 12px 14px;

  border-radius: 16px;
  border: 1px solid rgba(245,248,255,.12);
  background: rgba(10,13,18,.94);
  box-shadow:
    0 22px 70px rgba(0,0,0,.70),
    0 0 0 1px rgba(255,255,255,.03) inset;

  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  text-align:center;
}
.loadingTop{
  display:flex;
  align-items:center;
  gap:12px;
}
.spinner{
  width: 18px;
  height: 18px;
  border-radius: 999px;
  border: 2px solid rgba(245,248,255,.18);
  border-top-color: rgba(47,225,255,.95);
  box-shadow: 0 0 18px rgba(47,225,255,.14);
  animation: spin 800ms linear infinite;
  flex: 0 0 auto;
}
@keyframes spin{
  from{ transform: rotate(0deg); }
  to{ transform: rotate(360deg); }
}
.loadingText{
  display:flex;
  flex-direction:column;
  gap:4px;
  min-width:0;
}
.loadingTitle{ font-weight: 950; letter-spacing:.2px; }
.loadingMeta{ font-size: 12px; color: rgba(245,248,255,.70); }

.cancelWrap{ width: 100%; display:none; }
.loadingOn .cancelWrap{ display:block; }

/* ===== Tab depth shadows (no bleed into content) ===== */

/* Inactive tabs: recessed, mostly upward */
.tabBtn:not(.isActive){
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.04),
    0 -6px 14px rgba(0,0,0,.30);
}

/* Hovered inactive tab lifts slightly */
.tabBtn:not(.isActive):hover{
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.06),
    0 -8px 18px rgba(0,0,0,.38),
    0 0 18px rgba(47,225,255,.06);
}

/* Active tab: on top; shadow mostly upward so it doesn't spill into content */
.tabBtn.isActive{
  box-shadow:
    inset 0 1px 0 rgba(245,248,255,.10),
    0 -10px 24px rgba(0,0,0,.42),
    0 0 20px rgba(47,225,255,.08),
    0 0 18px rgba(255,63,210,.06);
}

/* No active-tab notch */
.tabBtn.isActive::after{
  content:none !important;
  display:none !important;
}
